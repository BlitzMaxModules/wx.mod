<html><head><title>Widgets II</title>


<link rel="stylesheet" href="../media/format.css" type="text/css">
<meta http-equiv="content-type" content="text/html; charset=utf-8">
<meta name="keywords" content="wxWidgets, tutorial, widgets, C++, programming, GUI, multiplatform">
<meta nam="description" content="Widgets II">
<meta name="language" content="en">
<meta name="author" content="jan bodnar">
<meta name="distribution" content="global"></head><body>


<div class="center">

<div>&nbsp;
<a href="index.html">Contents</a></div>



<h1>Widgets II</h1>

<p>
In this chapter, we will continue introducing various other widgets. 
</p>


<h3>wxListBox</h3>

<p>
A wxListBox widget is used for displaying and working with a list of
items. As it's name indicates, it is a rectangle that has a list of
strings inside. We could use it for displaying a list of mp3 files,
book names, module names of a larger project or names of our friends. A
wxListBox can be created in two different states. In a single selection
state or a multiple selection state. The single selection state is the
default state. There are two significant events in wxListBox. The first
one is the wxEVT_COMMAND_LISTBOX_SELECTED event. This event is
generated when we select a string in a wxListBox. The second one is the
wxEVT_COMMAND_LISTBOX_DOUBLE_CLICKED event. It is generated when we
double click an item in a wxListBox. The number of elements inside a
wxListBox is limited on GTK platform. According to the documentation,
it is currently around 2000 elements. The elements are numbered from
zero. Scrollbars are displayed automatically if needed.
</p>


<pre class="code"><div class="codehead">Listbox.h</div>
#include &lt;wx/wx.h&gt;
#include &lt;wx/listbox.h&gt;

class MyPanel : public wxPanel
{
public:
    MyPanel(wxPanel *parent);

    void OnNew(wxCommandEvent&amp; event);
    void OnRename(wxCommandEvent&amp; event);
    void OnClear(wxCommandEvent&amp; event);
    void OnDelete(wxCommandEvent&amp; event);

    wxListBox *m_lb;

    wxButton *m_newb;
    wxButton *m_renameb;
    wxButton *m_clearb;
    wxButton *m_deleteb;

};

class Listbox : public wxFrame
{
public:
    Listbox(const wxString&amp; title);

    void OnDblClick(wxCommandEvent&amp; event);

    wxListBox *listbox;
    MyPanel *btnPanel;

};

const int ID_RENAME = 1;
const int ID_LISTBOX = 5;

</pre>

<pre class="code"><div class="codehead">Listbox.cpp</div>
#include "Listbox.h"
#include &lt;wx/textdlg.h&gt;


Listbox::Listbox(const wxString&amp; title)
       : wxFrame(NULL, wxID_ANY, title, wxDefaultPosition, wxSize(270, 200))
{

  wxPanel * panel = new wxPanel(this, -1);

  wxBoxSizer *hbox = new wxBoxSizer(wxHORIZONTAL);

  listbox = new wxListBox(panel, ID_LISTBOX, 
      wxPoint(-1, -1), wxSize(-1, -1)); 

  hbox-&gt;Add(listbox, 3, wxEXPAND | wxALL, 20);

  btnPanel = new MyPanel(panel);
  hbox-&gt;Add(btnPanel, 2, wxEXPAND | wxRIGHT, 10);

  Connect(wxEVT_COMMAND_LISTBOX_DOUBLECLICKED, 
      wxCommandEventHandler(Listbox::OnDblClick));

  panel-&gt;SetSizer(hbox);
  Center();
  
}


MyPanel::MyPanel(wxPanel * parent)
       : wxPanel(parent, wxID_ANY)
{
  wxBoxSizer *vbox = new wxBoxSizer(wxVERTICAL);

  Listbox *lb = (Listbox *) parent-&gt;GetParent();
  m_lb = lb-&gt;listbox;

  m_newb = new wxButton(this, wxID_NEW, wxT("New"));
  m_renameb = new wxButton(this, ID_RENAME, wxT("Rename"));
  m_deleteb = new wxButton(this, wxID_DELETE, wxT("Delete"));
  m_clearb = new wxButton(this, wxID_CLEAR, wxT("Clear"));

  Connect(wxID_NEW, wxEVT_COMMAND_BUTTON_CLICKED, 
      wxCommandEventHandler(MyPanel::OnNew) );
  Connect(ID_RENAME, wxEVT_COMMAND_BUTTON_CLICKED, 
      wxCommandEventHandler(MyPanel::OnRename) );
  Connect(wxID_CLEAR, wxEVT_COMMAND_BUTTON_CLICKED, 
      wxCommandEventHandler(MyPanel::OnClear) );
  Connect(wxID_DELETE, wxEVT_COMMAND_BUTTON_CLICKED, 
      wxCommandEventHandler(MyPanel::OnDelete) );

  vbox-&gt;Add(-1, 20);
  vbox-&gt;Add(m_newb);
  vbox-&gt;Add(m_renameb, 0, wxTOP, 5);
  vbox-&gt;Add(m_deleteb, 0, wxTOP, 5);
  vbox-&gt;Add(m_clearb, 0, wxTOP, 5);

  SetSizer(vbox);
 
}


void MyPanel::OnNew(wxCommandEvent&amp; event) 
{
  wxString str = wxGetTextFromUser(wxT("Add new item"));
  if (str.Len() &gt; 0)
      m_lb-&gt;Append(str); 
}

void MyPanel::OnClear(wxCommandEvent&amp; event) 
{
  m_lb-&gt;Clear();
}

void MyPanel::OnRename(wxCommandEvent&amp; event) 
{
  wxString text;
  wxString renamed;
  
  int sel = m_lb-&gt;GetSelection();
  if (sel != -1) {
      text.Printf(m_lb-&gt;GetString(sel));
      renamed = wxGetTextFromUser(wxT("Rename item"), 
                  wxT("Rename dialog"), text);
  }

  if (!renamed.IsEmpty()) {
      m_lb-&gt;Delete(sel);
      m_lb-&gt;Insert(renamed, sel);
  }
}


void MyPanel::OnDelete(wxCommandEvent&amp; event) 
{
  int sel = m_lb-&gt;GetSelection();
  if (sel != -1) {
      m_lb-&gt;Delete(sel);
 }
}


void Listbox::OnDblClick(wxCommandEvent&amp; event) 
{
  wxString text;
  wxString renamed;

  int sel = listbox-&gt;GetSelection();
  if (sel != -1) {
      text.Printf(listbox-&gt;GetString(sel));
      renamed = wxGetTextFromUser(wxT("Rename item"), 
                  wxT("Rename dialog"), text);
  } 

  if (!renamed.IsEmpty()) {
      listbox-&gt;Delete(sel);
      listbox-&gt;Insert(renamed, sel);
  }
}

</pre>

<pre class="code"><div class="codehead">main.h</div>
#include &lt;wx/wx.h&gt;

class MyApp : public wxApp
{
  public:
    virtual bool OnInit();
};

</pre>

<pre class="code"><div class="codehead">main.cpp</div>
#include "main.h"
#include "Listbox.h"

IMPLEMENT_APP(MyApp)

bool MyApp::OnInit()
{

    Listbox *listbox = new Listbox(wxT("Listbox"));
    listbox-&gt;Show(true);

    return true;
}

</pre>
<br>

<pre class="explanation"> listbox = new wxListBox(panel, ID_LISTBOX, 
     wxPoint(-1, -1), wxSize(-1, -1));
</pre>

<p>
This is the constructor of the listbox widget.
</p>

<p>
In our example, we have a list box and four buttons. The buttons are used to add, rename, delete and clear all items in 
the listbox.
</p>

<pre class="explanation"> wxString str = wxGetTextFromUser(wxT("Add new item"));
 if (str.Len() &gt; 0)
     m_lb-&gt;Append(str); 
</pre>

<p>
To add a new string to the listbox, we display a <i>wxGetTextFromUser</i> dialog. We call the <i>Append()</i> method to 
append string to the listbox.
</p>

<pre class="explanation"> m_lb-&gt;Clear();
</pre>

<p>
To clear all items is the easiest action to do. We just call the <i>Clear()</i> method.
</p>

<pre class="explanation"> int sel = m_lb-&gt;GetSelection();
 if (sel != -1) {
     m_lb-&gt;Delete(sel);
 }
</pre>

<p>
To delete an item, we figure out the selected item. Then we call the <i>Delete()</i> method.
</p>

<p>
Renaming an item requires several steps.
</p>

<pre class="explanation"> wxString text;
 wxString renamed;
</pre>

<p>
We define two local variables.
</p>

<pre class="explanation"> int sel = m_lb-&gt;GetSelection();
 if (sel != -1) {
     text.Printf(m_lb-&gt;GetString(sel));
     renamed = wxGetTextFromUser(wxT("Rename item"), 
                 wxT("Rename dialog"), text);
 }
</pre>

<p>
We get the selected string and save it to the renamed variable.
</p>

<pre class="explanation"> if (!renamed.IsEmpty()) {
     m_lb-&gt;Delete(sel);
     m_lb-&gt;Insert(renamed, sel);
 }
</pre>

<p>
We check whether the renamed variable is empty. This is to avoid inserting empty strings. Then we delete the old item and
insert a new one.
</p>


<br>
<img src="../media/listbox.jpg" alt="Listbox">
<div class="figure">Figure: Listbox </div>


<h3>wxNotebook</h3>

<p>
wxNotebook widget joins multiple windows with corresponding tabs. 
You can position the Notebook widget using the following style flags: 
</p><ul>
<li>wxNB_LEFT</li>
<li>wxNB_RIGHT</li> 
<li>wxNB_TOP</li> 
<li>wxNB_BOTTOM</li> 
</ul>
The default position is wxNB_TOP.
<p></p>




<pre class="code"><div class="codehead">Notebook.h</div>
#include &lt;wx/wx.h&gt;
#include &lt;wx/notebook.h&gt;
#include &lt;wx/grid.h&gt;

class Notebook : public wxFrame
{
public:
    Notebook(const wxString&amp; title);

    void OnQuit(wxCommandEvent&amp; event);

};


class MyGrid : public wxGrid
{
public:
    MyGrid(wxNotebook *parent);

};

</pre>

<pre class="code"><div class="codehead">Notebook.cpp</div>
#include "Notebook.h"

Notebook::Notebook(const wxString&amp; title)
       : wxFrame(NULL, wxID_ANY, title, wxDefaultPosition, wxSize(400, 350))
{

  wxNotebook *nb = new wxNotebook(this, -1, wxPoint(-1, -1), 
      wxSize(-1, -1), wxNB_BOTTOM);

  wxMenuBar *menubar = new wxMenuBar;
  wxMenu *file = new wxMenu;
  file-&gt;Append(wxID_CLOSE, wxT("Quit"), wxT(""));
  menubar-&gt;Append(file, wxT("&amp;File"));
  SetMenuBar(menubar);

  Connect(wxEVT_COMMAND_MENU_SELECTED, 
      wxCommandEventHandler(Notebook::OnQuit)); 

  MyGrid *grid1 = new MyGrid(nb);
  MyGrid *grid2 = new MyGrid(nb);
  MyGrid *grid3 = new MyGrid(nb);

  nb-&gt;AddPage(grid1, wxT("Sheet1"));
  nb-&gt;AddPage(grid2, wxT("Sheet2"));
  nb-&gt;AddPage(grid3, wxT("Sheet3"));

  CreateStatusBar();
  Center();
}


void Notebook::OnQuit(wxCommandEvent&amp; event) 
{
  Close(true);
}

MyGrid::MyGrid(wxNotebook * parent)
       : wxGrid(parent, wxID_ANY)
{
  CreateGrid(30, 30);
  SetRowLabelSize(50);
  SetColLabelSize(25);
  SetRowLabelAlignment(wxALIGN_RIGHT, wxALIGN_CENTRE);
  SetLabelFont(wxFont(9, wxFONTFAMILY_DEFAULT, 
      wxFONTSTYLE_NORMAL, wxFONTWEIGHT_BOLD));

  for (int i = 0; i &lt; 30 ; i++) {
      this-&gt;SetRowSize(i, 25);
  }

}

</pre>


<pre class="code"><div class="codehead">main.h</div>
#include &lt;wx/wx.h&gt;

class MyApp : public wxApp
{
  public:
    virtual bool OnInit();
};

</pre>

<pre class="code"><div class="codehead">main.cpp</div>
#include "main.h"
#include "Notebook.h"

IMPLEMENT_APP(MyApp)

bool MyApp::OnInit()
{

    Notebook *notebook = new Notebook(wxT("Notebook"));
    notebook-&gt;Show(true);

    return true;
}

</pre>
<br>

<p>
In this example, we have created a notebook widget with three grids. The notebook widget is positioned at the 
bottom.
</p>


<pre class="explanation"> wxNotebook *nb = new wxNotebook(this, -1, wxPoint(-1, -1), 
      wxSize(-1, -1), wxNB_BOTTOM);
</pre>

<p>
Here we create the notebook widget. 
</p>

<pre class="explanation"> nb-&gt;AddPage(grid1, wxT("Sheet1"));
 nb-&gt;AddPage(grid2, wxT("Sheet2"));
 nb-&gt;AddPage(grid3, wxT("Sheet3"));
</pre>

<p>
We add three grid objects into the notebook widget. 
</p>

<br>
<img src="../media/notebook.jpg" alt="Notebook">
<div class="figure">Figure: Notebook widget </div>


<h3>wxScrolledWindow</h3>

<p>This is one of the container widgets. It can be useful, when we have
a larger area than a window can display. In our example, we demonstrate
such a case. We place a large image into our window. When the window is
smaller than our image, Scrollbars are displayed automatically.
</p>


<pre class="code"><div class="codehead">scrolledwindow.h</div>
#include &lt;wx/wx.h&gt;

class ScrWindow : public wxFrame
{
public:
  ScrWindow(const wxString&amp; title);

};
</pre>

<pre class="code"><div class="codehead">scrolledwindow.cpp</div>
#include "scrolledwindow.h"

ScrWindow::ScrWindow(const wxString &amp; title)
       : wxFrame(NULL, wxID_ANY, title, wxDefaultPosition, wxSize(300, 200))
{
  wxImage::AddHandler(new wxJPEGHandler);
  wxScrolledWindow *sw = new wxScrolledWindow(this);
  
  wxBitmap bmp(wxT("castle.jpg"), wxBITMAP_TYPE_JPEG);
  wxStaticBitmap *sb = new wxStaticBitmap(sw, -1, bmp);

  int width = bmp.GetWidth();
  int height = bmp.GetHeight();

  sw-&gt;SetScrollbars(10, 10, width/10, height/10);
  sw-&gt;Scroll(50,10);

  Center();
}

</pre>



<pre class="code"><div class="codehead">main.h</div>
#include &lt;wx/wx.h&gt;

class MyApp : public wxApp
{
  public:
    virtual bool OnInit();
};

</pre>

<pre class="code"><div class="codehead">main.cpp</div>
#include "main.h"
#include "scrolledwindow.h"

IMPLEMENT_APP(MyApp)

bool MyApp::OnInit()
{

    ScrWindow *sw = new ScrWindow(wxT("ScrolledWindow"));
    sw-&gt;Show(true);

    return true;
}
</pre>
<br>

<p>
In our example, we display a picture of a Spis castle. 
</p>

<pre class="explanation"> wxImage::AddHandler(new wxJPEGHandler);
</pre>

<p>
To handle jpg images, we must initiate the <i>wxJPEGHandler</i>.
</p>

<pre class="explanation"> wxScrolledWindow *sw = new wxScrolledWindow(this);

 wxBitmap bmp(wxT("castle.jpg"), wxBITMAP_TYPE_JPEG);
 wxStaticBitmap *sb = new wxStaticBitmap(sw, -1, bmp);
</pre>

<p>
We create a scroll window and put a static bitmap into it.
</p>

<pre class="explanation"> sw-&gt;SetScrollbars(10, 10, width/10, height/10);
</pre>

<p>
We set the scrollbars. 
</p>

<pre class="explanation"> sw-&gt;Scroll(50,10);
</pre>

<p>
We scroll the window a bit.
</p>


<br>
<img src="../media/scrolledwindow.jpg" alt="Scrolled Window">
<div class="figure">Figure: Scrolled Window </div>


<br>

<br>


<center>
<div class="botNav"><span class="botNavItem"><a href="index.html">Contents</a></span> ‡ <span class="botNavItem"><a href="#">Top of Page</a></span></div>
</center>

<div class="footer">
<div class="signature"><span class="copyright">© 2007 Jan Bodnar</span><br>
<span class="copyright"> Adapted for BlitzMax by Bruce A Henderson</span></div>
</div>

</div>
</body></html>